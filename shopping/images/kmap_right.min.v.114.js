kmap.loadLeftEnd=(new Date).getTime(),define("",["$"],function($){$s.wait("kmap_entity_div",function(entity_div){var right_div=entity_div.parentNode,statTypeList=[],kmap_stas_type_cl,cooperation="",showparams="",businessMap={},kmapRowNum=0,kmap_timeout=-1,rightVrId="50022701";function buildRelation(t){try{t=JSON.parse(t)}catch(t){return}if($s.$("kmap_relation_div")&&t&&t.nodes&&!(t.nodes.length<3)){var e=$s.$("kmap_relation_div"),a=$s.$c("div",e,"vr-tupu"),i=$s.$c("h3",a,"rvr-atAdBranch"),n=$s.$c("p",a,"gx"),s=$s.$c("div",a,"kj-box"),r=$s.$c("canvas",s),l=$s.$c("div",s,"kj-box2");l.style.display="none";var o,p=390,m=185,d=["top","left","bottom","right"],c=0,u=0,g=!0,h=!1,v="url(/tupu/images/handopen.cur),default",_="url(/tupu/images/handclose.cur),default";if(i.style.marginTop="0px",r.getContext){e.style.display="",r.id="kmap_rel",r.width=p,r.height=m,r.onclick=function(t){if(!g)return;var e=R(B(t.clientX,t.clientY));e&&(window.open("/web"+kmap.splicelink(e.name),"_blank"),(new Image).src=location.protocol+"//pb.sogou.com/cl.gif?uigs_productid=kmap&type=person_rel&query="+encodeURIComponent(e.name)+"&vrid=50023101&uigs_cl=node&sab="+sab+"&k_uuid="+uuid+"&gbkQuery="+encodeURIComponent(gbkQuery))},r.onmousemove=function(t){var e=B(t.clientX,t.clientY);if(t.preventDefault(),h){if(o.x==e.x&&o.y==e.y)return;g=!1;var a=e.x-o.x,i=e.y-o.y;c+=a,u+=i,o=e,f.translate(a,i),C()}else(x=R(e))&&$!=x&&($=x,C()),T!=x&&(T=x,C()),r.style.cursor=x?"pointer":v},r.onmousedown=function(t){h=!0,g=!0;var e=B(t.clientX,t.clientY);o=e,r.style.cursor=_},r.onmouseup=function(t){h=!1,r.style.cursor=v};for(var f=r.getContext("2d"),y=0;y<d.length;y++){var k=$s.$c("a",l,"p"+(y+1));k.href="javascript:void(0);",k.id="kmap_rel_dir_"+d[y],k.onclick=function(t){return function(){L(t)}}(y)}var $,b,w,T=null,x=null,N=[],M=[],A={};!function(){for(var e,a,i=0;i<t.nodes.length;i++){var n=t.nodes[i];A[n.id]=n}for(var i=0;i<t.nodes.length;i++){var n=t.nodes[i],s=n.img;0==n.level?(b=n).r=28:1==n.level?(N.push(n),n.r=22):2==n.level&&(M.push(n),n.r=22),n.image=new Image,e="100520136",a=n.id%4+1,s="http://img0"+a+".sogoucdn.com/net/a/"+e+"/link?appid="+e+"&url="+encodeURIComponent(s),s=kmap.getImgLink(s),n.image.src=s,n.link=[];for(var r=0;r<t.links.length;r++){var l=t.links[r];l.from==n.id&&2==A[l.to].level&&n.link.length<3&&n.link.push(A[l.to])}}$=b}(),b||(b={}),w="/tupu/person.html?q="+encodeURIComponent(b.name||""),n.innerHTML='<span class="p1">亲情</span><span class="p2">友情</span><span class="p3">爱情</span><a target="_blank" id="kmap_rel_more_vr_50023101" href="'+w+'">查看全部</a>',i.innerHTML='<a target="_blank" id="kmap_rel_title_vr_50023101" href="'+w+'">'+(b.name?b.name+"的关系图谱":"关系图谱")+"</a>",function(){var t=p/2,e=[0,-Math.PI/6,Math.PI/6];t=document.body.className.indexOf("vr1024")>=0?125:t,b.x=t,b.y=37;for(var a=N.length<=3?N.length+1:N.length-1,i=N.length<=3?1:0,n=N.length<=3?N.length:N.length-1,s=i,r=0;s<=n;s++,r++){var l=Math.PI+Math.PI*s/a,o=N[r];o.x=t+Math.round(110*Math.cos(l)),o.y=37-Math.round(110*Math.sin(l)),o.angle=l;for(var m=0;m<o.link.length;m++){var d=o.link[m];d.x=o.x+Math.round(140*Math.cos(l+(e[m]||0))),d.y=o.y-Math.round(140*Math.sin(l+(e[m]||0)))}}}(),C(),kmap.kmapPB("person_rel","&vrid=50023101")}else e.style.display="none"}function L(t){var e=0,a=0;0==t?a+=20:1==t?e+=20:2==t?a-=20:3==t&&(e-=20),c+=e,u+=a,f.translate(e,a),C(),(new Image).src=location.protocol+"//pb.sogou.com/cl.gif?uigs_productid=kmap&type=person_rel&uigs_cl=direction&sab="+sab+"&k_uuid="+uuid+"&gbkQuery="+encodeURIComponent(gbkQuery)}function C(){f.clearRect(-c,-u,p,m);for(var e=t.links,a=["#f0918f","#5f98f4","#88b566"],i=0;i<e.length;i++){var n=e[i],s=A[n.from],r=A[n.to];if((s.y!=r.y||s.level!=r.level||1!=s.level)&&($!=s&&$!=r)){for(var l=0;l<i&&(e[l].from!=n.to||e[l].to!=n.from);l++);l>=i&&H(f,s.x,s.y,r.x,r.y)}}for(i=0;i<e.length;i++){n=e[i],s=A[n.from],r=A[n.to];if((s.y!=r.y||s.level!=r.level||1!=s.level)&&s==$){f.beginPath(),f.lineWidth=2,f.strokeStyle=a[n.type],f.moveTo(s.x,s.y),f.lineTo(r.x,r.y),f.closePath(),f.stroke(),f.save(),f.fillStyle=a[n.type],f.textAlign="center",f.textBaseline="middle",f.font="11px Microsoft Yahei";var o=f.measureText(n.name).width+6;f.fillRect((s.x+r.x-o)/2,(s.y+r.y-14)/2,o,16),f.fillStyle="white",f.fillText(n.name,(s.x+r.x)/2,(s.y+r.y)/2),f.restore()}}for(var i in A){var d=A[i];d.imageLoaded?I(d):d.image.onload=function(t){return function(){t.imageLoaded=!0,I(t)}}(d)}}function I(e){f.save(),e==b&&(f.shadowColor="rgba(0,0,0,1)",f.shadowOffsetX=0,f.shadowOffsetY=2,f.shadowBlur=5,f.fillStyle="white",f.beginPath(),f.arc(e.x,e.y,e.r,0,2*Math.PI,!0),f.closePath(),f.fill()),f.restore(),f.save(),f.beginPath();var a=x==e?e.r+2:e.r;f.arc(e.x,e.y,a+1,0,2*Math.PI,!0),f.clip(),f.closePath();var i=Math.min(e.image.height,e.image.width);if(f.drawImage(e.image,0,0,i,i,e.x-a,e.y-a,2*a,2*a),f.restore(),f.beginPath(),f.fillStyle=e==b?"white":"#f0f2f3",f.arc(e.x,e.y,a,0,2*Math.PI,!0),f.arc(e.x,e.y,a+2,0,2*Math.PI,!1),f.fill(),f.closePath(),null!=x){for(var n=null,s=0;s<t.links.length;s++){var r=t.links[s];if(A[r.from]==x&&A[r.to]==e){n=e;break}}f.save(),f.fillStyle="rgba(0,0,0,0.45)",f.textAlign="center",f.textBaseline="middle",f.font="11px Microsoft Yahei";var l=f.measureText(e.name).width+6;x==e?(f.fillRect(e.x+e.r,e.y+(-e.r-14)/2,l,16),f.fillStyle="white",f.fillText(e.name,e.x+e.r+l/2,e.y-e.r/2)):null!=n&&(f.fillRect(e.x-l/2,e.y+e.r,l,16),f.fillStyle="white",f.fillText(e.name,e.x,e.y+e.r+7)),f.restore()}}function R(t){for(var e in A){var a=A[e];if((a.x-t.x+c)*(a.x-t.x+c)+(a.y-t.y+u)*(a.y-t.y+u)<a.r*a.r)return a}return null}function B(t,e){var a=r.getBoundingClientRect();return{x:t-a.left*(r.width/a.width),y:e-a.top*(r.height/a.height)}}function H(t,e,a,i,n,s){t.strokeStyle="#c4c4c4",t.lineWidth=1,t.beginPath(),s=s||4;var r,l=i-e,o=n-a;r=Math.floor(Math.sqrt(l*l+o*o)/s);for(var p=0;p<r;p++)t[p%2==0?"moveTo":"lineTo"](e+l/r*p,a+o/r*p);t.stroke()}}function buildTitle(t,e){var a=$s.$c("h3",entity_div,"rvr-atAdBranch");a.title=t||"",t=t?kmap.cutLength(t,40):"",""==entity_div.innerHTML&&(a.style.marginTop="0");var i=["<span class='kmapAttrTitle'>"+t+"</span>"];return e&&i.push('<span class="atAdMore atAdMoreLeft">（'+e+"）</span>"),a.innerHTML=i.join(""),a}function buildFoldBtn(t){if(t.len>4*(t.row||1)){var e=$s.$c("a",t.titleDiv,"rvr-info-box");kmap.hidefocus(e,"展开","#","sgkmap_right_"+kmap_stas_type_cl+"_more_vr_"+rightVrId),e.onclick=function(e){e?e.preventDefault():window.event.returnValue=!1;var a=getColumNumPerRow()*(t.row||1),i=4*getColumNumPerRow();if(t.div&&/(^|\s+)kmap-cuts($|\s+)/.test(t.div.className)&&(a=getColumNumPerRow()),"rvr-info-box"==this.className){if(this.className="rvr-info-box btn-hide",this.innerHTML="收起",t.div){for(var n=$s.$$(t.div,"li"),s=0;s<i&&s<n.length;s++){var r=$s.$$(n[s],"img")[0];r.getAttribute("data-src")&&r.setAttribute("data-show","show"),n[s].style.display=""}for(s=i;s<n.length;s++)n[s].style.display="none"}}else if(this.className="rvr-info-box",this.innerHTML="展开",t.div){for(n=$s.$$(t.div,"li"),s=0;s<a&&s<n.length;s++)n[s].style.display="";for(s=a;s<n.length;s++)n[s].style.display="none"}return base64Transform(entity_div),!1}}}function buildMoreBtn(t){var e=$s.$c("a",t.titleDiv,"rvr-info-box btn-more");kmap.hidefocus(e,"更多",location.protocol+"//top.sogou.com/hot/shishi_1.html","sgkmap_right_"+kmap_stas_type_cl+"_more_vr_"+rightVrId)}function buildKmapList(t,e,a,i,n,s,r,l,o,p){if(kmap.first(t,"heat"))buildEnergyMap(t,a);else{var m=kmap.all(t,"element"),d=m.length,c=kmap.attr(t,"row"),u=kmap.attr(t,"ImgType");if(!(kmapRowNum>=4)){3==kmapRowNum&&(c=1);var g=getColumNumPerRow();c&&1!=c&&parseInt(g)*parseInt(c)>parseInt(d)&&(c=Math.floor(parseInt(d)/parseInt(g))),showparams&&(showparams+="##"),showparams+=a+""+(c=c||1)+"";var h=0;if(void 0!==window.kmap_top_entity_type&&0==h&&(h=kmap_top_entity_type),a!=h&&(i!=h||""==i)){kmap.attr(t,"powerquery");var v=kmap.attr(t,"powerid"),_=kmap.attr(t,"note"),f=kmap.attr(t,"addname");n=v||n;var y=buildTitle(a,_);if(f)$s.$$(y,"span")[0].innerHTML+='<span class="business">&nbsp;-&nbsp;'+f+"</span>",cooperation||(cooperation=encodeURIComponent(f));var k=$s.$c("ul",entity_div,"rvr-atAdPiclist"),$="rvr-atpic2";u&&"LONG"===u&&($+=" size-75-100"),i=i||a;for(var b=0,w=[],T=0;T<d;T++){var x=m[T],N=kmap.attr(x,"name").replace(/&apos;/g,"'");businessMap[N]?b++:w.push(x)}d-b<4?(entity_div.removeChild(k),entity_div.removeChild(y)):(2==c&&d-b<8&&(c=1),kmapRowNum+=parseInt(c),"1"==kmap.attr(t,"ishotrecom")?(rightVrId="50023401",buildMoreBtn({titleDiv:y})):buildFoldBtn({len:d-b,titleDiv:y,row:c,div:k}));var M=0,A=0,L="sgkmap_right_"+p+"_"+kmap_stas_type_cl+"_"+r+"_cols_"+g;for(T=0;T<w.length;T++){var C,I,R=$s.$c("li",k),B=$s.$c("div",R,"repDiv rep_Feed"),H=(N=kmap.attr(w[T],"name").replace(/&apos;/g,"'"),kmap.attr(w[T],"innerid")),P=kmap.attr(w[T],"allname"),V=kmap.attr(w[T],"add"),D=(kmap.attr(w[T],"score"),kmap.attr(w[T],"ptype"),kmap.attr(w[T],"baikeurl"),kmap.attr(w[T],"docid"),kmap.attr(w[T],"docurl"),kmap.attr(w[T],"picaddress")),E=kmap.attr(w[T],"year"),j=P?P.replace(/&apos;/g,"'"):N+(V?" "+V:"");B.style.marginBottom="5px";var S=kmap.feedlink(B,"rvr-atReport",oldQuery+"_"+a+"_"+N+"_right","纠错",!0,!0);S.id="sgkmap_right_"+n+"_"+kmap.attr(w[T],"nameid")+"_"+e+"_l"+T+"_wrong",S.setAttribute("con",N),S.setAttribute("product","right"),f&&(p=encodeURIComponent(f)),R.id=L+"_pos_"+(e+1)+"_"+(T+1)+"_innerid_"+H+"_vr_"+rightVrId;var U=kmap.attr(w[T],"link");U&&f||(U=l?kmap.splicelink(j,null,null,1):kmap.splicelink(j,n,kmap.attr(w[T],"nameid"),1,i||a,T));var F=$s.$c("a",R,$+" rim-pic");if(F.href=U,F.target="_blank",(C=$s.$c("a",R)).href=U,C.target="_blank",window.uigs_para&&"7"==window.uigs_para.abtestid&&(C.className="kmap-underline"),I=$s.$c("img",F),P&&(C.title=P.replace(/&apos;/g,"'"),I.title=P.replace(/&apos;/g,"'")),I.style.display="none",I.setAttribute("data-src",D),u&&"LONG"===u&&($+=" size-75-100",I.setAttribute("data-long","yes")),T>=g*(c||1)?(I.setAttribute("data-show","hide"),R.style.display="none",showparams+=N+"^"+H+"^0"):(E?(M++,A++):M++,I.setAttribute("data-show","show"),showparams+=N+"^"+H+"^1"),$s.$c("span",C,"kmap-title").innerHTML=kmap.cutLength(N,24),E)$s.$c("span",R,"kmap-year").innerHTML=" "+kmap.cutLength(E,24);else kmap.attr(w[T],"type")&&(R.innerHTML+=" "+kmap.cutLength(kmap.attr(w[T],"type"),24));if(kmap.dommouseact($s.$$(R,"a")[0],R.className,R.className+" rvr-atFbBg",$s.$$(R,"a")[0].parentNode.parentNode),U&&f&&o){var G=$s.$c("span",F,"bg-black bg-black-hide"),q=$s.$c("a",G,"pop-game");q.href=U,q.target="_blank",q.appendChild(document.createTextNode("进入下载")),function(t,e,a){kmap.dommouseact(e,"bg-black bg-black-hide","bg-black",a),kmap.dommouseact(t,"bg-black bg-black-hide","bg-black",a)}(F,C,G)}}M&&A/M<.75&&(k.className+=" kmap-hide-year"),k.setAttribute("data-show-row",c||1)}}}}function resizeCallback(){-1!=kmap_timeout&&clearTimeout(kmap_timeout),kmap_timeout=setTimeout(function(){for(var t=entity_div.getElementsByTagName("ul"),e=0,a=t.length;e<a;e++){var i=t[e],n=i.previousSibling,s=null;if(n&&n.getElementsByTagName("a").length>0&&(s=n.getElementsByTagName("a")[0]),i.getAttribute("data-show-row")){var r=parseInt(i.getAttribute("data-show-row"));/(^|\s+)kmap-cuts($|\s+)/.test(i.className)&&(r=1);var l=$s.$$(i,"li"),o=getColumNumPerRow()*r,p=4*getColumNumPerRow();if(s)if("rvr-info-box"==s.className){for(m=0;m<o&&m<l.length;m++){(d=$s.$$(l[m],"img")[0]).getAttribute("data-src")&&d.setAttribute("data-show","show"),l[m].style.display=""}for(m=o;m<l.length;m++)l[m].style.display="none"}else{for(l=$s.$$(i,"li"),m=0;m<p&&m<l.length;m++){(d=$s.$$(l[m],"img")[0]).getAttribute("data-src")&&d.setAttribute("data-show","show"),l[m].style.display=""}for(m=p;m<l.length;m++)l[m].style.display="none"}else{for(var m=0;m<o&&m<l.length;m++){var d;(d=$s.$$(l[m],"img")[0]).getAttribute("data-src")&&d.setAttribute("data-show","show"),l[m].style.display=""}for(var m=o;m<l.length;m++)l[m].style.display="none"}}}base64Transform(entity_div),kmap_timeout=-1},100)}function buildEnergyMap(t,e){var a=$s.$c("h3",entity_div,"rvr-atAdBranch"),i=parseInt(kmap.attr(t,"type"))||0,n=kmap.attr(t,"t").replace("|","<br>"),s=parseFloat(kmap.tagtext(kmap.first(t,"heat"))),r=[[24,38,66,77,87,82,71,59,45,33,26,32,26,22,17,19,13,16,19,13,6],[2,3,4,7,17,42,71,88,105,83,56,32,14,8,4,3,3,2,1,1,1],[2,3,4,7,27,72,82,96,75,33,12,8,4,3,2,3,3,2,1,1,1]],l=$s.$c("div",entity_div,"fdGraphic_area"),o=$s.$c("div",l,["fdGraphic","fdGraphic3","fdGraphic2"][i]);l.style.paddingBottom="19px",o.innerHTML=i>0?'<div class="graphic_tit_area"><span class="graphic_tit">'+n+'</span><span class="graphic_mask"></span></div>':'<div class="fdGraphic_tit_area"><span class="fdGraphic_tit"><span>'+n+"</span></span><div>";var p=$s.$c("ul",o,"fdGraphic_lst");a.innerHTML=e;var m=Math.floor((s-[0,140,140][i])/[43,4.76,5.24][i]);m>20&&(m=20);for(var d=0;d<r[i].length;d++){$s.$c("li",p,d==m?"on":"").innerHTML='<span style="height:'+r[i][d]+'px"></span>'}var c=$s.$("kmap_business_title"),u=$s.$("kmap_business_ul");c&&entity_div.appendChild(c),u&&entity_div.appendChild(u)}function buildNewsTimeline(t){var e,a,i,n,s=kmap.tagtext(kmap.first(t,"title")),r=kmap.tagtext(kmap.first(t,"description")),l=kmap.tagtext(kmap.first(t,"query"))||"",o=kmap.all(t,"event");if(!(o.length<1)){e=$s.$c("div",entity_div,"news-track-side"),a=$s.$c("h3",e),n="http://news.sogou.com/news?query="+encodeURIComponent(l)+"&p=40330301",a.innerHTML=s+(l?'<a href="'+n+'" target="_blank"> (更多)</a>':""),r&&($s.$c("div",e,"news-info-text").innerHTML=r),buildTimeline(kmap.all(o[0],"milestone"),e,{main:!0}),o.length>1&&($s.$c("div",e,"his_events").innerHTML='<span class="his_events_text">历史事件</span>');for(var p=1;p<o.length;p++){i=$s.$c("div",e,"eventsDiv");var m,d=$s.$c("a",i);d.setAttribute("hidefocus",!0),d.style.outline="none",d.href="javascript:void(0)",d.innerHTML=kmap.attr(o[p],"title")+"<span id=kmap_event_unfold_"+p+">展开</span>",m=buildTimeline(kmap.all(o[p],"milestone"),e,{main:!1}),d.onclick=function(t,a){return function(){for(var i=1;i<o.length;i++){var n=$s.$("kmap_event_unfold_"+i);n.style.display=a==i?"none":"";for(var s=$s.$$(e,"ul"),r=1;r<s.length;r++)s[r].style.display="none";t.style.display="";var l=$s.$$($s.$("kmap_main_timeline"),"li");for(r=3;r<l.length-1;r++)l[r].style.display="none";l[l.length-1].style.display=""}}}(m,p)}kmap.kmapPB("news_timeline","");var c=$s.$("kmap_business_title"),u=$s.$("kmap_business_ul");c&&entity_div.appendChild(c),u&&entity_div.appendChild(u)}}function formatTime(t,e){if(!t)return"";if(!e)return date2str(t,"yyyy-MM-dd hh:mm");var a=t.getTime()/1e3,i=e.getTime()/1e3;return i-a<60?parseInt(i-a)+"秒前":i-a<3600?parseInt((i-a)/60)+"分钟前":i-a<86400?parseInt((i-a)/3600)+"小时前":i-a<604800?parseInt((i-a)/86400)+"天前":date2str(t,"yyyy-MM-dd hh:mm")}function buildTimeline(t,e,a){var i=$s.$c("ul",e,"news-track"),n="",s=new Date(window.now);a.main&&(i.id="kmap_main_timeline"),a=a||{};for(var r=0;r<t.length;r++){var l,o,p,m,d,c,u,g=kmap.attr(t[r],"url")||"javascript:void(0)",h=kmap.attr(t[r],"title"),v=kmap.attr(t[r],"pubtime"),_=kmap.attr(t[r],"nodetype");kmap.attr(t[r],"source");c=(d=new Date(Date.parse(v.replace(/-/g,"/")))).getFullYear(),a.main&&c&&c!=n&&n&&r!=t.length&&((l=$s.$c("li",i)).innerHTML=c),n=c,l=$s.$c("li",i),p=$s.$c("span",l,"news-time"),"4"==_&&a.main&&r<2?p.className+=" new-ico":p.innerHTML=date2str(d,a.main?"MM-dd":"yyyy-MM"),o=$s.$c("div",l,"news-info"),m="news-title","1"==_?m="top-ico news-title":"3"==_&&(m="start-ico news-title"),u=kmap.cutLength(h,"1"==_||"3"==_?28:34),o.innerHTML='<a href="'+g+'" class="'+m+'" target="_blank">'+h+'</a><a href="'+g+'" class="'+m+'1024" target="_blank">'+u+"</a>","4"==_&&a.main&&r<2&&(o.innerHTML+="<p>"+formatTime(d,s)+"</p>")}if(a.main&&t.length>3){(l=$s.$c("li",i,"showLi")).style.display="none";var f=$s.$c("a",l);f.href="javascript:void(0)",f.innerHTML="<span>展开</span>",f.onclick=function(){for(var t=$s.$$(i,"li"),a=0;a<t.length;a++)t[a].style.display="";var n=$s.$$(e,"ul");for(a=1;a<n.length;a++)n[a].style.display="none";this.parentNode.style.display="none";var s=$s.$$(e,"div");for(a=0;a<s.length;a++)if("eventsDiv"==s[a].className){var r=$s.$$(s[a],"span");r[0]&&(r[0].style.display="")}}}return a.main||(i.style.display="none"),i}function getBusinessNum(t){if(t){var e=t.display.attribute.element;return!e||e instanceof Array||(e=[e]),e.length}return 0}function buildBusinessEntity(t,e){if(t){var a=t.display.attribute,i=t.pvtype||"",n=a.element;n instanceof Array||(n=[n]);var s,r=n.length,l="rvr-atAdPiclist";if(6==r?l+=" kmap-width-320":5==r&&(r=4),!(kmapRowNum>=4)){kmapRowNum+=s=3==kmapRowNum?1:r<=4?1:2,buildTitle(a.name).id="kmap_business_title";var o=$s.$c("ul",entity_div,l),p=getColumNumPerRow(),m=r<4*s?r:4*s,d=[];o.id="kmap_business_ul";for(var c=0;c<m;c++){var u,g,h=$s.$c("li",o),v=$s.$c("div",h,"repDiv rep_Feed"),_=n[c],f=_.name.replace(/&apos;/g,"'"),y=_.allname,k=_.add,$=_.adkid||"",b=_.addomainpicurl||"",w=y?y.replace(/&apos;/g,"'"):f+(k?" "+k:"");c>=p*s&&(h.style.display="none"),v.style.marginBottom="5px";var T=kmap.feedlink(v,"rvr-atReport","","纠错",!0,!0);T.id="sgkmap_business_"+i+"_"+c+"_wrong_vr_50022801",T.setAttribute("con",f),T.setAttribute("product","business");var x=$s.$c("a",h,"rvr-atpic2");x.id="sgkmap_business_"+e+"_"+i+"_"+encodeURIComponent(f)+"_"+(c+1)+"_"+m+"_"+$+"_vr_50022801";var N=_.adurl||"";if(N||(N=kmap.splicelink(w)),x.href=N,x.target="_blank",x.setAttribute("onclick","return sogou_adclk(event,this)"),(u=$s.$c("a",h)).href=N,u.target="_blank",window.uigs_para&&"7"==window.uigs_para.abtestid&&(u.className="kmap-underline"),u.id="sgkmap_business_"+e+"_"+i+"_"+encodeURIComponent(f)+"_"+(c+1)+"_"+m+"_"+$+"_vr_50022801",u.setAttribute("onclick","return sogou_adclk(event,this)"),g=$s.$c("img",x),y&&(u.title=y.replace(/&apos;/g,"'"),g.title=y.replace(/&apos;/g,"'")),$s.$c("span",u,"kmap-title").innerHTML=kmap.cutLength(f,24),b){x.className+=" kmap-adds-logo-atag";var M=$s.$c("span",x,"kmap-adds-logo"),A=$s.$c("img",M);A.style.display="none",A.setAttribute("data-src",b),A.setAttribute("data-show","show"),A.setAttribute("data-logo","true")}g.style.display="none",g.setAttribute("data-src",_.picaddress),g.setAttribute("data-show","show"),kmap.dommouseact($s.$$(h,"a")[0],h.className,h.className+" rvr-atFbBg",$s.$$(h,"a")[0].parentNode.parentNode),d.push(f),businessMap[f]=!0}o.setAttribute("data-show-row",s||1),setTimeout(function(){window.regALink&&window.regALink(entity_div)},100),kmap.kmapPB("kmap_business_"+e,"&count="+m+"&words="+encodeURIComponent(d.join("+"))+"&vrid=50022801")}}}function removeClass(t,e){t.className=t.className.replace(e,"")}function addClass(t,e){t.className=t.className+" "+e}function feedBackAssign(t,e){if($s.$("kmap_entity_div")&&!/\.soso\./.test(location.hostname)){var a=$s.$c("div",$s.$("kmap_entity_div"),"rvr-feedBack"),i=$s.$c("span",a,"fr");a.id="tp_fb_bcl",i.innerHTML='<a id="sgkmap_right_report" href="#" class="fb">反馈</a>';a=$s.$c("div",$s.$("kmap_entity_div"),"rvr-crtFeedBack"),$s.$c("span",a),i=$s.$c("span",a,"fr");a.style.display="none",a.id="tp_fb_acl",a.innerHTML='若以上内容有误，点击相应的“纠错”提交；其他问题，请直接点击 <a class="fb" href="#">反馈</a> <a class="cc" href="#">取消</a>';for(var n=$s.$$(entity_div,"a"),s=0,r=[];s<n.length;s++)"rvr-atReport"==n[s].className&&(r.push(n[s]),n[s].onclick=function(){p(!0);var t=!1;"none"==this.style.display?this.style.display="":(t=!0,this.parentNode.style.display="");var a=$s.$c("div",document.body,"atThanks"),i=kmap.pos(this);return a.innerHTML="感谢您的反馈",a.style.top=i[1]+"px",a.style.left=i[0]-40+"px",t?this.parentNode.style.display="none":this.style.display="none",$s.$("tp_fb_bcl").style.display="",$s.$("tp_fb_acl").style.display="none",$s.$$($s.$("tp_fb_bcl"),"a")[0].innerHTML="谢谢！继续反馈",$s.$$($s.$("tp_fb_bcl"),"a")[0].className="",e&&removeClass(l,"correction"),o(a,i[1],.1),kmap.tupudissatisfied("tupufankuiform","kmap_entity_div",this.getAttribute("con"),"right",this.getAttribute("product")),!1});var l=$s.$$($s.$("tp_fb_bcl").parentNode,"div")[0];$s.$$($s.$("tp_fb_bcl"),"a")[0].onclick=function(){return displayAll(r,!0),e&&addClass(l,"correction"),$s.$("tp_fb_bcl").style.display="none",$s.$("tp_fb_acl").style.display="",!1},$s.$$($s.$("tp_fb_acl"),"a")[0].onclick=function(){return kmap.tupudissatisfied("tupufankuiform","kmap_entity_div",t,"right","right"),$s.$$($s.$("tp_fb_bcl"),"a")[0].innerHTML="谢谢！继续反馈",$s.$$($s.$("tp_fb_bcl"),"a")[0].className="",$s.$("tp_fb_bcl").style.display="",$s.$("tp_fb_acl").style.display="none",e&&removeClass(l,"correction"),displayAll(r),!1},$s.$$($s.$("tp_fb_acl"),"a")[1].onclick=function(){return $s.$("tp_fb_bcl").style.display="",$s.$("tp_fb_acl").style.display="none",e&&removeClass(l,"correction"),displayAll(r),!1}}function o(t,e,a){var i=parseInt(t.style.top.replace("px",""));i>e-40?(t.style.top=i-2+"px",t.style.opacity=a,i==e-20?setTimeout(function(){o(t,e,.9)},800):setTimeout(function(){o(t,e,i>e-20?a+.1:a-.1)},50)):t.outerHTML=""}function p(t){for(s=0;s<r.length;s++)"div"==r[s].parentNode.tagName.toLowerCase()&&-1!=r[s].parentNode.className.indexOf("rep_Feed")?r[s].parentNode.style.display=t?"none":displayname:r[s].style.display=t?"none":displayname}}function displayAll(t,e){for(var a=0;a<t.length;a++)-1!=t[a].parentNode.className.indexOf("rep_Feed")?t[a].parentNode.style.display=e?"block":"none":t[a].style.display=e?"":"none"}function init(){entity_div.innerHTML="",window.rightVrView&&"1024"==window.rightVrView&&(right_div.className+=" kmap-vr1024"),kmapRowNum=getGameVrRowNum();var t="none";if(kmap_properties.business&&kmap_properties.business.kmap_json){var e=kmap_properties.business.kmap_json,a=getBusinessNum(e);a>=3?t="up":a>0&&(t="down"),buildBusinessEntity(e,t),i=!0}if(kmap_properties.right.kmap_dom){kmap_stas_type_cl=kmap_properties.right.type+"_"+kmap_properties.right.attr+"_"+kmap_properties.right.showtype;var i=!1,n=!1,s=kmap.attr(kmap_properties.right.entity,"id"),r=kmap.attr(kmap_properties.right.entity,"name"),l=kmap_properties.right.kmap_dom.getElementsByTagName("attribute"),o=l.length,p=(kmap_properties.right.entity,kmap.first(kmap_properties.right.kmap_dom,"storydoc"));n=p&&"1"==kmap.attr(p,"type");var m=kmap_properties.right.kmap_dom.getElementsByTagName("relation")[0];if((m=kmap.tagtxt(m))&&buildRelation(m),n&&buildNewsTimeline(p),o>0){rightVr&&o>3&&(o=3),n&&o>2&&(o=2);var d=[!0,!0,!0];3==o&&(kmap.attr(l[0],"addname")&&!kmap.attr(l[1],"addname")&&kmap.attr(l[2],"addname")?d=[!0,!1,!1]:kmap.attr(l[0],"addname")||!kmap.attr(l[1],"addname")||kmap.attr(l[2],"addname")||(d=[!1,!1,!1]));for(var c=0;c<o;c++){var u=l[c].getAttribute("name"),g=l[c].getAttribute("word"),h=kmap.attr(l[c],"requery"),v=kmap.attr(l[c],"stattype");v||(v="unknown"),statTypeList.push("_",v,"-",c),v=v?"content_"+v:"content",u&&buildKmapList(l[c],c,u,g,s,r,v,h,d[c],t)}i=!0}kmap.kmapPB("right","&vrid="+rightVrId+"&pvarg="+kmap_stas_type+"&attr="+statTypeList.join("")+"&cooperation="+cooperation+"&showparams="+encodeURIComponent(showparams))}if("down"==t){var _=$s.$("kmap_business_title"),f=$s.$("kmap_business_ul");_&&entity_div.appendChild(_),f&&entity_div.appendChild(f)}if(base64Transform(entity_div),$s.ua.ios||$s.ua.and||$s.$b(window,["resize"],[resizeCallback]),entity_div&&entity_div.innerHTML?entity_div.style.display="":entity_div.outerHTML="",$s.$("kmap_entity_div")){var y=$s.$("kmap_entity_div").firstChild;y&&"rvr-atAdBranch"==y.className&&(y.style.marginTop="0px")}i&&feedBackAssign(r),(i||n)&&window.setTimeout(function(){cutAds()},500)}function cutAds(){kmap.cutAds(),kmap.cutRankList($s.$("kmap_right_ranklist")),kmap.cutQueryList($s.$("kmap_right_querylist")),kmap.cutRight&&kmap.cutRight()}function date2str(x,y){var z={y:x.getFullYear(),M:x.getMonth()+1,d:x.getDate(),h:x.getHours(),m:x.getMinutes(),s:x.getSeconds()};return y.replace(/(y+|M+|d+|h+|m+|s+)/g,function(v){return((v.length>1?"0":"")+eval("z."+v.slice(-1))).slice(-(v.length>2?v.length:2))})}function getColumNumPerRow(){return window.rightVrView&&"1024"==window.rightVrView?3:$s.viewport().width<1281?3:4}function getGameVrRowNum(){for(var t=$s.$("right").getElementsByTagName("ul"),e=0,a=0,i=t.length;a<i;a++){var n=t[a];if(/vr_img_ul|atAdPiclist/gi.test(n.className)){var s=n.getElementsByTagName("li");e+=Math.ceil(s.length/4)}}return e}function base64Transform(t){if(t){for(var e=[],a=[],i=t.getElementsByTagName("img"),n=0,s=i.length;n<s;n++){var r=i[n];r.getAttribute("data-src")&&"show"==r.getAttribute("data-show")&&(r.removeAttribute("data-show"),e.push(encodeURIComponent(r.getAttribute("data-src"))),a.push(r))}if(1==e.length||$s.ua&&($s.ua.ie6||$s.ua.ie7))m();else if(e.length>1){var l=location.protocol+"//img.sogoucdn.com/v2/thumb?appid=10010016&cb=kmapCallbackBase64&url="+e.join(","),o=window.setTimeout(function(){m()},1e3);window.kmapCallbackBase64=m;var p=document.getElementsByTagName("head")[0];$s.$c("script",p,"",l,"gbk")}}function m(t){window.clearTimeout(o),t=t||{};for(var e=0;e<a.length;e++){var i=a[e],n=i.getAttribute("data-src"),s=75,r=75;if(i.getAttribute("data-long")&&(r=100),i.getAttribute("data-logo")&&(s=16,r=16),i.style.display="",n){var l=t[n]||"";i.removeAttribute("data-src"),l?kmap.imageHandle(i,"data:image/jpeg;base64,"+l,s,r):kmap.imageHandle(i,n,s,r)}}a=[]}}window.rightVr?setTimeout(init,100):init(),kmap.leftDone=(new Date).getTime(),kmap.speedStat("right")})});