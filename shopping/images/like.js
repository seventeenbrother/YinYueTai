define(["require","exports","module","user","ajax","alertify"],function(e,t,n){var r=e("user"),i=e("ajax"),s=e("alertify"),o=$(document);return{bind:function(){var e=this;o.on("click",".J_like",function(t){t.preventDefault();var n=$(t.currentTarget),r=n.data("id");e.like(r,function(){n.removeClass("J_like").addClass("active J_liked");var e=n.siblings(".like_num");e.html(parseInt(e.html())+1)})}).on("click",".J_liked",function(t){t.preventDefault();var n=$(t.currentTarget),r=n.data("id");e.removeLike(r,function(){n.removeClass("active J_liked").addClass(" J_like");var e=n.siblings(".like_num");e.html(parseInt(e.html())-1)})})},like:function(e,t){r.login(function(){i.post("/favorites/add.json",{goodsId:e},function(e){e.status!=="200"?s.error(e.statusText):(s.success(e.statusText),t())})})},removeLike:function(e,t){r.login(function(){i.post("/favorites/cancel.json",{goodsId:e},function(e){e.status!=="200"?s.error(e.statusText):(s.success(e.statusText),t())})})}}});