define(["require","exports","module","modules/yinyuetai/login-register/templates/main","user","modules/yinyuetai/login-register/bindphone","modules/yinyuetai/login-register/placeholder","modules/yinyuetai/login-register/statis"],function(e,t,n){var r=e("modules/yinyuetai/login-register/templates/main"),i=e("user"),s=e("modules/yinyuetai/login-register/bindphone"),o=Backbone.View.extend({el:"body",initialize:function(){var t=this;this._appendTemplate(function(){t._bindEvent(),t._checkBindPhone(),t._preloadBgImage(),window.newLoginRegister=!0,e("modules/yinyuetai/login-register/placeholder"),$.fn.placeholder=$.fn.placeholder||function(){return this},e("modules/yinyuetai/login-register/statis")})},_appendTemplate:function(e){$("body").append(r),e&&e()},_preloadBgImage:function(){i.isLogined()||(window.BOX_BG_IMAGE="//feature.yinyuetai.com/v2/images/modules/login-register/temp-bg.jpg",$.ajax({url:"//login.yinyuetai.com/v2/get-image",dataType:"jsonp",cache:!0,jsonpCallback:"_jsonpGetLoginRegisterBgImage"}).done(function(e){if(e.error===!1){var t=new Image;t.onload=function(){window.BOX_BG_IMAGE=this.src},t.src=e.imgUrl}}))},_bindEvent:function(){var e=this;this.$el.on("click",".login-type-list",function(e){var t=e.target;if(t.nodeName.toLowerCase()=="li"){var n=t.innerHTML,r=$(t).attr("logotxt"),i=$(".login-type-txt")[0].innerHTML,s=$(".login-type-txt").attr("logotxt");$(".login-type-txt")[0].innerHTML=r,$(".login-type-txt").attr("logotxt",n),t.innerHTML=s,$(t).attr("logotxt",i)}}),this.$el.on("click",".register-type-list",function(e){var t=e.target;if(t.nodeName.toLowerCase()=="li"){var n=t.innerHTML,r=$(t).attr("logotxt"),i=$(".register-type-txt")[0].innerHTML,s=$(".register-type-txt").attr("logotxt");$(".register-type-txt")[0].innerHTML=r,$(".register-type-txt").attr("logotxt",n),t.innerHTML=s,$(t).attr("logotxt",i)}}),this.$el.on("click",".J_login",function(e){i.login(function(){location.href=location.href})}),this.$el.on("click",".J_register",function(t){e._showLoginRegisterBox(t,"register")})},_showLoginRegisterBox:function(t,n){t.preventDefault(),e(["modules/yinyuetai/login-register/login-register-box"],function(e){e.show(n)})},_checkBindPhone:function(){var e=this;i.get("withmobile")==0&&(this.bindPhone=new s,this.bindPhone.BindPhoneDialog.on("hide",function(){i.unsetWithmobile()}))}});return new o});