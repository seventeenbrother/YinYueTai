define(["require","exports","module","ajaxform"],function(e,t,n){function i(){this.listeners={}}var r=e("ajaxform");String.prototype.trim=String.prototype.trim||function(){return this.replace(/(^\s*)|(\s*$)/g,"")},i.prototype={constructor:i,sub:function(e,t){this.listeners[e]=this.listeners[e]||[],this.listeners[e].push(t)},one:function(e,t){this.sub(e,function n(r){t.call(this,r),this.unbind(e,n)})},pub:function(e,t){if(this.listeners&&this.listeners[e])for(var n=0;n<this.listeners[e].length;n++)this.listeners[e][n].call(this,t)},unbind:function(e,t){if(this.listeners&&this.listeners[e])if(typeof t!="function")delete this.listeners[e];else for(var n=0;n<this.listeners[e].length;n++)this.listeners[e][n]===t&&this.listeners[e].splice(n--,1)}};var s=".beta";return{API:{getSign:"//login"+s+".yinyuetai.com/v2/get-sign",login:"//login"+s+".yinyuetai.com/v2/login",getAuth:"//login"+s+".yinyuetai.com/v2/get-auth",reg:"//login"+s+".yinyuetai.com/v2/reg",bindMobile:"//login"+s+".yinyuetai.com/v2/bind-mobile",getBgImage:"//login"+s+".yinyuetai.com/v2/get-image",getGt:"//login"+s+".yinyuetai.com/v2/get-gtauth"},parseDom:function(e){var t=document.createElement("div");return t.innerHTML=e,t.childNodes[0]},checkEmail:function(e){return/^[a-z0-9._%-]+@([a-z0-9-]+\.)+[a-z]{2,4}$/.test(e)},Observer:i,observer:new i,iframeAjax:function(e){var t=$.Deferred(),n=e.data,i=this.parseDom(['<form action="'+e.url+'" method="post">',"</form>"].join("")),s="";for(var o in n)s+='<input type="hidden" name="'+o+'" value="'+n[o]+'">';return i.innerHTML=s,document.body.appendChild(i),new r($(i),{onComplete:function(e){t.resolve(e)},onError:function(e){t.reject(e)}}),$(i).submit(),t}}});